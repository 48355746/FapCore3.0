angular.module("ie7support",[]).config(function(n){n.enabled(!1)});var surveyModule=angular.module("survey",["angularFileUpload","ng.ueditor"]);surveyModule.config(["$httpProvider",function(n){n.defaults.xsrfCookieName="YII_CSRF_TOKEN";n.defaults.xsrfHeaderName="X-YII-CSRF-TOKEN";n.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]);surveyModule.directive("paginationList",function(){return{restrict:"EA",require:"?ngModel",scope:{totalItems:"=",firstText:"@",prevText:"@",nextText:"@",lastText:"@"},templateUrl:"pagination_list.html",link:function(n,t,i,r){function f(n,t){var u=5,f=Math.max(n-Math.floor((u-1)/2),1),i=f+u-1,e,r;for(i>t&&(i=t,f=Math.max(i-u+1,1)),e=[],r=f;i>=r;r++)e.push(r);return e}r.$render=function(){n.currentPage=parseInt(r.$viewValue,10)||1;n.pages=f(n.currentPage,n.totalPage)};var u={itemsPerPage:10,currentPage:1,isFirstLast:!0,isPrevNext:!0,firstText:"<<",prevText:"<",nextText:">",lastText:">>"};n.isFirstLast=angular.isDefined(i.isFirstLast)?i.isFirstLast:u.isFirstLast;n.isPrevNext=angular.isDefined(i.isPrevNext)?i.isPrevNext:u.isPrevNext;n.$watch("totalItems",function(){n.itemsPerPage=angular.isDefined(i.itemsPerPage)?parseInt(i.itemsPerPage,10):u.itemsPerPage;n.totalPage=Math.ceil(n.totalItems/n.itemsPerPage);n.setPage(1)});n.getText=function(n){return i[n+"Text"]||u[n+"Text"]};n.setPage=function(t){t>n.totalPage&&(t=n.totalPage);1>t&&(t=1);r.$setViewValue(t);r.$render()};n.isFirstPage=function(){return 1===n.currentPage};n.isLastPage=function(){return n.currentPage===n.totalPage};n.isActive=function(t){return n.currentPage===t}}}});surveyModule.run(["$templateCache",function(n){n.put("pagination_list.html",'<ul class=pagination-list> <li ng-if=isFirstLast><a ng-class="{disabled: isFirstPage()}" ng-bind="getText(\'first\')" ng-click="setPage(1)"><\/a> <li ng-if=isPrevNext><a ng-class="{disabled: isFirstPage()}" ng-bind="getText(\'prev\')" ng-click="setPage(currentPage - 1)"><\/a> <li ng-repeat="page in pages"><a ng-class="{current: isActive(page)}" ng-bind=page ng-click="setPage(page)"><\/a> <li ng-if=isPrevNext><a ng-class="{disabled: isLastPage()}" ng-bind="getText(\'next\')" ng-click="setPage(currentPage + 1)"><\/a> <li ng-if=isFirstLast><a ng-class="{disabled: isLastPage()}" ng-bind="getText(\'last\')" ng-click="setPage(totalPage)"><\/a><\/ul>')}]);surveyModule.directive("star",function(){return{restrict:"EA",require:"?ngModel",scope:{readonly:"=",hints:"@",max:"@"},template:'<ul class=star-list> <li ng-repeat="star in stars"> <a ng-click="changeScore($index)" ng-attr-title="{{star.hint}}" class=star ng-class="{\'selected\': star.selected}"><\/a> <\/ul>',link:function(n,t,i,r){function u(){var t,r;for(n.stars=[],n.hints=angular.isDefined(i.hints)?n.$eval(i.hints):[],t=0;t<n.max;t++)r={selected:t<n.score,hint:void 0==n.hints[t]?"":n.hints[t]},n.stars.push(r)}n.max=angular.isDefined(i.max)?i.max:5;n.changeScore=function(t){!n.readonly&&t>=0&&t<n.stars.length&&(r.$setViewValue(t+1),r.$render())};r.$render=function(){n.score=parseInt(r.$viewValue,10)||0;u()}}}});surveyModule.controller("SurveyTipController",["$scope","$sce","$http","$q",function(n){function t(){var t="";switch(n.project.type){case 1:t="当前为预览状态，发布后才能投票";break;default:t="问卷当前为编辑状态，填写答案不会记录系统，请勿将页面分享他人填答"}return 5==n.project.status&&(t="项目已关闭，调研链接已失效！"),t}n.init=function(i){n.project=i;n.tip=t()}}]);$(document).ready(function(){Array.prototype.indexOf=function(n){for(var t=0;t<this.length;t++)if(this[t]==n)return t;return-1};Array.prototype.remove=function(n){var t=this.indexOf(n);t>-1&&this.splice(t,1)}});surveyModule.controller("SurveyDetailController",["$scope","$sce","$http","$q","$timeout","$location","$anchorScroll","FileUploader",function(n,t,i,r,u,f,e,o){function c(n){f.hash(n);e()}function p(n){var t=!1;return angular.forEach(n.value,function(i,r){i===!0&&inArray(n.choice[r].id.toString(),n.exclusive_options.split(","))&&(t=!0)}),t}function l(n){n.targetTime=0;angular.forEach(n.list,function(t){0===t.logic_hide&&(n.targetTime+=3)})}function a(t){clearInterval(h);n.runningTime=0;l(t);t.restTime=t.targetTime;h=setInterval(function(){n.runningTime+=1;w(t);n.$apply();t.restTime<=0&&clearInterval(h)},1e3)}function d(t){clearInterval(h);h=setInterval(function(){n.runningTime+=1;w(t);n.$apply();t.restTime<=0&&clearInterval(h)},1e3)}function w(t){t.restTime=t.targetTime-n.runningTime;t.restTime<0&&(t.restTime=0)}var k,h;n.init=function(t,i,r){c("survey-navigation");n.selectedPage=1;n.surveyId=t.survey_id;n.pages=t.pages;n.pageCount=t.page_count;n.logic=t.logic_condition&&t.logic_condition.logic_condition_relation?t.logic_condition.logic_condition_relation:null;angular.isArray(n.logic)&&(n.logic=n.logic.length>0?n.logic:null);n.redirectLogic=n.logic?null:t.redirect_relation?t.redirect_relation:null;n.redirectQuesArr=[];n.stopType=0;n.scene=parseInt(t.scene,10);n.type=parseInt(t.type,10);n.isClosed=i;n.isDisabled=!1;n.project=r;n.questionMap={};n.quoteAnswerArr={};n.choiceQuoteRelation={};n.absluteIdOrderMap={};n.runningTime=0;n.currentQuestion=null;n.loaded=0;g();tt();n.process={current:0,total:0,percent:0};n.updateProcess()};n.updateProcess=function(){var i=0,t=0;angular.forEach(n.pages,function(r){angular.forEach(r.list,function(r){if(0===r.logic_hide&&10!=r.type_id&&11!=r.type){t++;var u=n.checkQuestion(r);u&&i++}})});n.process.current=i;n.process.total=t;n.process.percent=t>0?parseInt(100*i/t,10):0};n.radioSelect=function(t,i,r){n.isClosed||(t.value=i,n.shuffleLogicShow(t,r))};n.checkboxSelect=function(t,i,r){n.isClosed||(t.value[i]=!t.value[i],n.shuffleLogicShow(t,r))};n.isChoiceSelect=function(n,t){return 6==n.type_id&&n.value==t?!0:8==n.type_id&&1==n.value[t]?!0:!1};n.answerQuestion=function(t,i,r){if(!n.isClosed){switch(t.type_id){case 6:case 14:t.choice_quote>0&&(i=parseInt(r.order,10)-1);t.value=i;n.shuffleLogicShow(t,r);break;case 7:n.shuffleLogicShow(t,r);break;case 8:case 15:t.choice_quote>0&&(i=parseInt(r.order,10)-1);t.value[i]=!t.value[i];n.shuffleLogicShow(t,r);t.value[i]===!0&&n.updateExclusive(t,i,r);break;case 1:case 2:n.shuffleLogicShow(t,[]);break;case 9:t.value[r]=i;n.shuffleLogicShow(t,[]);break;case 13:t.value[r][i]=!t.value[r][i];n.shuffleLogicShow(t,[])}var u=t.content.split(".");void 0!==n.quoteAnswerArr[u[0]]&&(n.quoteAnswerArr[u[0]]=rt(t));n.choiceQuoteRelation[t.id]&&angular.forEach(n.choiceQuoteRelation[t.id],function(i){n.pages[i.pageIndex].list[i.quesIndex].content_show=0;angular.forEach(t.value,function(t,r){t===!0?(n.pages[i.pageIndex].list[i.quesIndex].content_show=1,n.pages[i.pageIndex].list[i.quesIndex].choice[r].hide=0):n.pages[i.pageIndex].list[i.quesIndex].choice[r].hide=1})});n.currentQuestion=t;n.updateProcess()}};n.changeQuestion=function(t){n.currentQuestion=t};n.stopPropagation=function(n){n.stopPropagation()};n.fileUploader=new o({url:basePath+"/System/Api/Survey/UploadFile/0",autoUpload:!0,removeAfterUpload:!0,alias:"upload_img",queueLimit:4});n.fileUploader.onCompleteItem=function(t,i){t.question.value.length<t.question.max&&t.question.value.push({value:i.img_url});n.updateProcess()};n.deleteQuestionItem=function(t,i,r){i=i.splice(r,1);n.answerQuestion(t)};n.replaceTitleQuote=function(t){var r=t.match(/\[Q[0-9]*[1-9][0-9]*\]/g),i;return null===r?t:(i=t,angular.forEach(r,function(t){var r=t.substring(2,t.length-1),u=new RegExp("\\[Q"+r+"\\]","g");i=n.quoteAnswerArr[r]?i.replace(u,n.quoteAnswerArr[r]):i}),i)};var g=function(){angular.forEach(n.pages,function(t,i){t.restTime=3;t.targetTime=0;angular.forEach(t.list,function(t,r){var f,s,h,e,o,c;(n.questionMap[t.id]=[i,r],t.passed=!0,t.type_id=parseInt(t.type_id,10),t.vote_type_id=parseInt(t.vote_type_id,10),t.logic_hide=parseInt(t.logic_hide,10),4!=n.project.status&&10!=t.type_id&&t.index&&(t.content=t.index+". "+t.content),t.logic_hide>0&&(t.logicParent=[]),"N"===t.required&&t.content.indexOf(". ")>=0)&&(f=t.content.split(". "),s=f[0],f.splice(0,1),t.content=s+". 【非必填】"+f.join(". "));"Y"===t.title_quote&&(h=it(t.content),angular.forEach(h,function(t){void 0===n.quoteAnswerArr[t]&&(n.quoteAnswerArr[t]="")}));(parseInt(t.choice_quote,10)>0?(t.content_show=0,n.choiceQuoteRelation[t.choice_quote]||(n.choiceQuoteRelation[t.choice_quote]=[]),n.choiceQuoteRelation[t.choice_quote].push({pageIndex:i,quesIndex:r})):t.content_show=1,7===t.type_id&&t.value&&angular.forEach(t.choice,function(n){t.value.id===n.id&&(t.value=n)}),(8===t.type_id||15===t.type_id)&&(t.max=parseInt(t.max?t.max:0,10),t.min=parseInt(t.min?t.min:0,10),(t.max>0||t.min>0)&&(t.tip=t.min===t.max?"选择"+t.max+"个选项":0===t.max?"选择至少"+t.min+"个选项":0===t.min?"选择至多"+t.max+"个选项":"选择"+t.min+"-"+t.max+"个选项",t.tip&&0===t.vote_type_id&&(t.tip=" ("+t.tip+")"))),12===t.type_id&&(t.max=parseInt(t.max,10),t.min=""==t.min?0:parseInt(t.min,10),(t.max>0||t.min>0)&&(t.tip=t.min===t.max?"上传"+t.max+"张图片":0===t.max?"最少上传"+t.min+"张图片":0===t.min?"最多上传"+t.max+"张图片":"上传"+t.min+"-"+t.max+"张图片",t.tip&&0===t.vote_type_id&&(t.tip=" ("+t.tip+")"))),(3===t.vote_type_id||4===t.vote_type_id||14===t.type_id||15===t.type_id)&&angular.forEach(t.choice,function(n){n.contentArr=n.content.split("#**#")}),8===t.vote_type_id)?(e=0,t.vertical=0,o=0,n.loaded=0,angular.forEach(t.choice,function(i){var r=new Image;r.src=i.content;r.onload=function(){o++;r.width>r.height&&(u(function(){t.vertical=1}),e=1);i.imgHeight=r.height;i.imgWidth=r.width;o==t.choice.length&&(angular.forEach(t.choice,function(n){var t=nt(n.imgWidth,n.imgHeight,e);n.content=1==e?"<img src='"+n.content+"' style='max-width: 100%;max-height:100%'/>":"<img src='"+n.content+"' style='width:"+t.width+"px;height:"+t.height+"px;'/>"}),n.loaded=1)}})):n.loaded=1;c=t.content.split(".");n.absluteIdOrderMap[t.id]=c[0]});l(t);1===t.index&&a(t)})},nt=function(n,t,i){var r,u;return 1==i?849>=n&&214>=t?(r=t,u=n):849>=n?(r=214,u=parseFloat(n/t)*r,u>849&&(u=849,r=parseFloat(t/n)*u)):214>=t?(u=849,r=parseFloat(t/n)*u,r>214&&(r=214,u=parseFloat(n/t)*r)):(u=849,r=parseFloat(t/n)*u,r>214&&(r=214,u=parseFloat(n/t)*r)):412>=n&&600>=t?(r=t,u=n):412>=n?(r=600,u=parseFloat(n/t)*r,u>412&&(u=412,r=parseFloat(t/n)*u)):600>=t?(u=412,r=parseFloat(t/n)*u,r>600&&(r=600,u=parseFloat(n/t)*r)):(u=412,r=parseFloat(t/n)*u,r>600&&(r=600,u=parseFloat(n/t)*r)),{width:u,height:r}},tt=function(){null!=n.logic?angular.forEach(n.pages,function(t){angular.forEach(t.list,function(t){t.type_id>5&&t.type_id<9&&t.logic_condition&&t.logic_condition.logic_show_list&&angular.forEach(t.choice,function(i){i.selected===!0&&n.shuffleLogicShow(t,i)})})}):null!=n.redirectLogic&&(angular.forEach(n.redirectLogic,function(t,i){n.redirectQuesArr.push(i)}),n.redirectQuesArr.length>0&&y(n.pages[n.questionMap[n.redirectQuesArr[0]][0]].list[n.questionMap[n.redirectQuesArr[0]][1]]))},it=function(n){var i=n.match(/\[Q[0-9]*[1-9][0-9]*\]/g),t;return null===i?!1:(t=[],angular.forEach(i,function(n){var i=n.substring(2,n.length-1);inArray(i,t)||t.push(i)}),t)},rt=function(n){var r="",i,u,t,f;if(1!==n.type_id&&2!==n.type_id||""===n.value&&null===n.value||(r=n.value),6===n.type_id&&null!==n.value&&(r=n.choice[n.value].content,"Y"===n.choice[n.value].is_other&&n.choice[n.value].other_content&&(r+=n.choice[n.value].other_content)),7===n.type_id&&null!==n.value&&(r=n.value.content),8===n.type_id){i=[];for(t in n.value)t<n.value.length&&n.value[t]===!0&&i.push(t);if(i.length>0){u=[];for(t in i)t<n.value.length&&(f=n.choice[i[t]].content,"Y"===n.choice[i[t]].is_other&&n.choice[i[t]].other_content&&(f+=n.choice[i[t]].other_content),u.push(f));r=u.join("、")}}return r};n.trustAsHtml=function(n){return t.trustAsHtml(n)};n.toJsDate=function(n){return n?new Date(n):null};n.formatDate=function(n){if(!n)return null;var t=new Date(n);return t.getFullYear()+"年"+(t.getMonth()+1)+"月"+t.getDate()+"日"};n.selectPage=function(t){n.selectedPage=t};var v=function(t,i){var u,r;if(n.logic&&n.logic[t]&&n.logic[t][i]){u=n.logic[t][i];for(r in u)r=parseInt(r,10),1===parseInt(u[r],10)&&(n.pages[n.questionMap[r][0]].list[n.questionMap[r][1]].logic_hide=0,-1===n.pages[n.questionMap[r][0]].list[n.questionMap[r][1]].logicParent.indexOf(t)&&n.pages[n.questionMap[r][0]].list[n.questionMap[r][1]].logicParent.push(t))}},b=function(t,i){var f,r,u;if(n.logic&&n.logic[t]&&n.logic[t][i]){f=n.logic[t][i];for(r in f)(r=parseInt(r,10),1===parseInt(f[r],10))&&(u=n.pages[n.questionMap[r][0]].list[n.questionMap[r][1]],0===u.logic_hide&&u.logicParent.indexOf(t)>-1&&u.logicParent.length<2&&(n.pages[n.questionMap[r][0]].list[n.questionMap[r][1]].logic_hide=1,ut(u)),u.logicParent.indexOf(t)>-1&&n.pages[n.questionMap[r][0]].list[n.questionMap[r][1]].logicParent.remove(t))}},ut=function(n){var t=[];6===n.type_id&&null!==n.value&&(t.push(n.choice[n.value].id),n.value=null);7===n.type_id&&null!==n.value&&(t.push(n.value.id),n.value=null);8===n.type_id&&angular.forEach(n.value,function(i,r){i===!0&&(t.push(n.choice[r].id),n.value[r]=null)});angular.forEach(t,function(t){b(n.id,t)})};n.shuffleLogicShow=function(t,i){var r,u;if(n.project.status<4||t.logic_condition&&t.logic_condition.logic_show_list){for(r in t.choice)(8!==t.type_id||8===t.type_id&&t.value[r]!==!0)&&b(t.id,t.choice[r].id);if(6===t.type_id&&v(t.id,i.id),7===t.type_id&&v(t.id,t.value.id),8===t.type_id)for(r in t.value)t.value[r]===!0&&v(t.id,t.choice[r].id);n.updateRestTime(n.pages[n.selectedPage-1])}if(!n.logic&&n.redirectLogic&&n.redirectLogic[t.id]){for(r in t.choice)(8!==t.type_id&&15!==t.type_id||(8===t.type_id||15===t.type_id)&&t.value[r]!==!0)&&y(t);((6===t.type_id||14===t.type_id)&&s(t.id,i.id),7===t.type_id&&s(t.id,t.value.id),8===t.type_id||15===t.type_id)&&(u=ft(t),u!==!1&&s(t.id,t.choice[u].id));(1===t.type_id||2===t.type_id)&&($.trim(t.value)?s(t.id,0):y(t));9===t.type_id&&s(t.id,0);13===t.type_id&&et(t)&&s(t.id,0);n.updateRestTime(n.pages[n.selectedPage-1])}};var ft=function(t){var r,u,e,s=!1,f=0,i,o,h;for(i in t.value)t.value[i]===!0&&(s=!0,void 0===r&&(r=i),o=t.choice[i].id,n.redirectLogic[t.id][o]&&(h=n.redirectLogic[t.id][o],angular.forEach(h,function(t,o){if(-1===f)-2===parseInt(o,10)&&(r=i,f=-2);else if(0===f)if(parseInt(o,10)>0){var s=n.questionMap[o][0],h=n.questionMap[o][1];(void 0===u||void 0===e||u>s||s===u&&e>h)&&(u=s,e=h,r=i)}else f=parseInt(o),r=i})));return s===!0?r:!1},et=function(n){var t=!1;return angular.forEach(n.value,function(n){t||angular.forEach(n,function(n){n!==!0||t||(t=!0)})}),t},y=function(t){var i=n.questionMap[t.id][0],r=n.questionMap[t.id][1];angular.forEach(n.pages,function(n,t){angular.forEach(n.list,function(n,u){(t>i||t===i&&u>r)&&(n.logic_hide=1)})})},s=function(t,i){var u,f,r,o,e;n.redirectLogic&&n.redirectLogic[t]&&(r=!1,n.redirectLogic[t][i]?(o=n.redirectLogic[t][i],angular.forEach(o,function(t,i){parseInt(i,10)>0?(u=n.questionMap[i][0],f=n.questionMap[i][1],r=!0,n.stopType=0):(n.stopType=i,r=!1)})):(u=n.questionMap[t][0],f=n.questionMap[t][1]+1,r=!0,n.stopType=0),r&&(e=!1,angular.forEach(n.pages,function(t,i){angular.forEach(t.list,function(t,r){(i>u||i===u&&r>=f)&&!e&&(t.logic_hide=0,n.redirectLogic[t.id]&&(e=!0))})})))};n.updateExclusive=function(n,t,i){if(n.exclusive_options){var r=n.exclusive_options.split(",");inArray(i.id.toString(),r)?(angular.forEach(n.value,function(t,i){n.value[i]=!1}),n.value[t]=!0):angular.forEach(r,function(t){angular.forEach(n.choice,function(i,r){i.id.toString()===t&&(n.value[r]=!1)})})}};n.getQuoteTip=function(t){var r="",i;if(parseInt(t.choice_quote,10)>0){i="";switch(parseInt(t.type_id,10)){case 6:i="单选题";break;case 7:i="下拉选择题";break;case 8:i="多选题"}r="&lt;"+i+"&gt此题目选项来自于第"+n.absluteIdOrderMap[t.choice_quote]+"题中的选项"}return r};n.filterHide=function(n){var t=[];return angular.forEach(n,function(n){n.hide&&0!==n.hide||t.push(n)}),t};k=function(n){var t=!0,i=!0;return angular.forEach(n,function(n){var u,r,f;(n.passed=!0,"Y"===n.required&&0===n.logic_hide)&&((1!==n.type_id&&2!==n.type_id||null!==n.value&&""!==n.value||(t=!1,n.passed=!1),6!==n.type_id&&7!==n.type_id&&14!==n.type_id||null!==n.value||(t=!1,n.passed=!1),8===n.type_id||15===n.type_id)&&(u=!1,r=0,angular.forEach(n.value,function(n){n===!0&&(r+=1,u=!0)}),u===!1&&(t=!1,n.passed=!1),parseInt(n.max,10)>0&&r>parseInt(n.max,10)&&(t=!1,n.passed=!1),parseInt(n.min,10)>0&&r<parseInt(n.min,10)&&!p(n)&&(t=!1,n.passed=!1)),(9===n.type_id&&angular.forEach(n.value,function(i,r){n.radio_array_title[r].passed=!0;null===i&&(t=!1,n.passed=!1,n.radio_array_title[r].passed=!1)}),13===n.type_id&&angular.forEach(n.value,function(i,u){n.checkbox_array_title[u].passed=!0;var f=!1;angular.forEach(i,function(n){n===!0&&(r+=1,f=!0)});f===!1&&(t=!1,n.passed=!1,n.checkbox_array_title[u].passed=!1)}),12===n.type_id)&&(r=n.value.length,0>=r&&(t=!1,n.passed=!1),parseInt(n.max,10)>0&&r>parseInt(n.max,10)&&(t=!1,n.passed=!1),parseInt(n.min,10)>0&&r<parseInt(n.min,10)&&(t=!1,n.passed=!1)));(0===n.logic_hide&&n.passed&&(6==n.type_id&&angular.forEach(n.choice,function(i,r){n.value==r&&"Y"==i.is_other&&1==i.required&&(null===i.other_content||""===$.trim(i.other_content))&&(t=!1,n.passed=!1)}),8==n.type_id&&angular.forEach(n.choice,function(i,r){n.value[r]&&"Y"==i.is_other&&1==i.required&&(null===i.other_content||""===$.trim(i.other_content))&&(t=!1,n.passed=!1)}),9===n.type_id&&angular.forEach(n.value,function(i,r){var u,f;null!==i&&i in n.choice&&(u=n.choice[i],"Y"==u.is_other&&1==u.required&&(f=n.radio_array_title[r].other_content[i],(null===f||""===$.trim(f))&&(t=!1,n.passed=!1,n.radio_array_title[r].passed=!1)))}),13===n.type_id&&angular.forEach(n.value,function(i,r){angular.forEach(n.choice,function(u,f){if(i[f]&&"Y"==u.is_other&&1==u.required){var e=n.checkbox_array_title[r].other_content[f];(null===e||""===$.trim(e))&&(t=!1,n.passed=!1,n.checkbox_array_title[r].passed=!1)}})})),i&&!n.passed)&&(i=!1,f="survey-question-"+n.page+"-"+n.order,c(f))}),t};n.checkQuestion=function(n){var t=!0,r,i;return 0===n.logic_hide&&((1!==n.type_id&&2!==n.type_id&&3!==n.type_id||null!==n.value&&""!==n.value||(t=!1),6!==n.type_id&&7!==n.type_id&&14!==n.type_id||null!==n.value||(t=!1),8===n.type_id||15===n.type_id)&&(r=!1,i=0,angular.forEach(n.value,function(n){n===!0&&(i+=1,r=!0)}),r===!1&&(t=!1),parseInt(n.max,10)>0&&i>parseInt(n.max,10)&&(t=!1),parseInt(n.min,10)>0&&i<parseInt(n.min,10)&&!p(n)&&(t=!1)),(9===n.type_id&&angular.forEach(n.value,function(n){null===n&&(t=!1)}),13===n.type_id&&angular.forEach(n.value,function(n){var r=!1;angular.forEach(n,function(n){n===!0&&(i+=1,r=!0)});r===!1&&(t=!1)}),12===n.type_id)&&(i=n.value.length,0>=i&&(t=!1),parseInt(n.max,10)>0&&i>parseInt(n.max,10)&&(t=!1),parseInt(n.min,10)>0&&i<parseInt(n.min,10)&&(t=!1))),t};n.checkNextPage=function(t){var i=k(t);i===!0&&(n.selectPage(n.selectedPage+1),a(n.pages[n.selectedPage-1]),c("survey-navigation"))};n.submit=function(n){var t=s(n);t===!0&&(location.href=basePath+"Survey/Survey/FinishSelfCollectionSurvey")};n.submitSelf=function(n){var t=s(n);t===!0&&(location.href=basePath+"Survey/Survey/FinishSelfCollectionSurvey")};n.updateRestTime=function(t){l(t);t.restTime<=0&&t.targetTime>n.runningTime&&d(t)};h=0;n.initPageTimer=function(n){a(n)};n.questionTypeClass=function(n){var t,i=n.vote_type_id;return 6==i?t="input-type":7==i?t="text-type":8==i&&(t=1==n.vertical?"image-type vertical-type":"image-type horizon-type"),t}}]);