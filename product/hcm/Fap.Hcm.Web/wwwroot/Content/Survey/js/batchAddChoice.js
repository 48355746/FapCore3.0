define("home:static/js/survey/widget/batchAddChoice.js",function(i,e){"use strict";var t="<style>.handle-dialog{font-size:14px;font-family:微软雅黑;position:fixed;left:50%;top:40%;width:500px;min-height:220px;margin-left:-250px;background:#fff;border-radius:4px;border:1px solid #f6f9fe;z-index:1003;padding-bottom:30px}.handle-dialog-title{height:40px;line-height:40px;padding-left:16px;color:#2c4a93;background:#f1f5fd;border-bottom:1px solid #b0c0e7}.handle-dialog-content{margin:15px;color:#666}.handle-dialog-button{text-align:center;height:20px;line-height:20px;padding-top:0px}.survey-mask{position:fixed;height:100%;width:100%;background:#aaa;z-index:1002;top:0;left:0;opacity:.5;filter:alpha(opacity:50)}.button{width:64px;height:30px;line-height:20px;border-radius:3px;background:#f1f5fd;border:1px solid #b0c0e7;color:#2c4a93;cursor:pointer}.button:hover{background:#f1f5fd;border:1px solid #6583cc;color:#2c4a93}.button-confirm{background:#249cfa;border:1px solid #249cfa;color:#fff}.button-confirm:hover{background:#48aefe;border:1px solid #48aefe;color:#fff}.close{font-size:18px;line-height:40px!important;font-weight:700;color:#666;float:right;padding-right:16px;cursor:pointer}.add-content-tip{line-height:24px;margin:10px 0 4px 0}.choice-area{margin:0 16px 12px 0}.batch-choices{height:100px;width:470px;overflow:auto;resize:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background-color:#fff;border:1px solid #ccc;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-webkit-transition:border linear .2s,box-shadow linear .2s;-moz-transition:border linear .2s,box-shadow linear .2s;-o-transition:border linear .2s,box-shadow linear .2s;transition:border linear .2s,box-shadow linear .2s}.batch-add-error{color:red;margin-right:10px}</style>",o='<div class=question-handle-dialog> <div class=handle-dialog> <div class=handle-dialog-title>批量添加选项<span class=close>&times;</span></div> <div class=handle-dialog-content> <div class=add-content> <div class=add-content-tip>每行代表一个选项，可以添加多个选项</div> <div class=choice-area> <textarea class="batch-choices"></textarea> </div> </div> </div> <div class=handle-dialog-button> <span class=batch-add-error></span> <input type=button class="dialog-button-survey button-confirm" id=survey-confirm-y value="确定">&nbsp; <input type=button class="dialog-button-survey button-cancel" id=survey-confirm-n value="取消"> </div> </div> <div class=survey-mask></div></div>';$("body").append(t),e.show=function(i){var e=$.Deferred();$("body").append(o);var t=$(".question-handle-dialog");t.find("#survey-confirm-y").attr("choice","Y"),"N"===$(i).parents(".add-area").attr("choice")&&t.find("#survey-confirm-y").attr("choice","N"),t.find(".batch-choices").val("");var a=$(i).parents(".add-area").siblings(".question-title").find(".question-id").attr("order")-1;return t.find("#survey-confirm-y").attr("question-id",a),t.find("#survey-confirm-y").click(function(){if($(".batch-add-error").html(""),$.trim(t.find(".batch-choices").val())){var o=$.trim(t.find(".batch-choices").val()),a=o.split("\n"),n=$(i).parents(".topic-type-content"),d="",r=n.find(".question-title").attr("type");switch(r){case"6":d="radio";break;case"8":d="checkbox"}var c="";if("6"===r||"8"===r){var s,l=parseInt(n.find(".question-id").attr("absolute_id"));for(var h in a)$.trim(a[h])&&(a[h]=a[h].replace(/<[^<]*>/g,""),choice_absolute_id[l]++,s=choice_absolute_id[l],c+='<li class="choice" has_other="N" choice_absolute_id='+s+'><input type="'+d+'" name="'+d+'"><div class="position-relative"><div class="edit-area edit-child-element" contenteditable="true">'+a[h]+'</div></div><div class="option-tips"></div></li>');n.find(".question-choice").append(c),n.find(".question-choice").hasClass("select-ul")&&n.find(".question-choice").find(".choice").addClass("select_choice")}else if("9"===r)if("N"===$(this).attr("choice")){for(var h in a)if($.trim(a[h])){a[h]=a[h].replace(/<[^<]*>/g,""),c+='<tr><td class="radio_array_title" name="radio-matrix"><div class="position-relative"><div class="edit-area edit-child-element" contenteditable="true">'+a[h]+"</div></div></td>";for(var p=n.find(".question-choice").find("tr:eq(0)").find("td").length,f=1;p>f;f++){c+='<td><input type="radio">';var u=n.find(".question-choice").find("tr:eq(0)").find("td:eq("+f+")").find(".choice");"Y"==u.attr("has_other")&&(c+='<input type="text" class="other-content"  style="width: 120px;height: 30px;vertical-align: middle;" >',1==u.attr("choice_required")&&(c+='<span class="required-content">(必填)</span>')),c+="</td>"}c+="</tr>"}{n.find(".question-choice").find("tr:eq(0)").clone()}n.find(".question-choice").find("tbody").append(c)}else{var v="";for(var h in a)$.trim(a[h])&&(c+='<td name="radio-matrix-clone"><div class="position-relative"><li class="choice edit-area matrix-choice" has_other="N" contenteditable="true"  >'+a[h]+"</li></div></td>",v+='<td><input type="radio"></td>');n.find(".question-choice").find("tr:eq(0)").append(c),n.find(".question-choice").find("tr").each(function(){$(this).index()>0&&$(this).append(v)})}else if("13"===r)if("N"===$(this).attr("choice")){for(var h in a)if($.trim(a[h])){a[h]=a[h].replace(/<[^<]*>/g,""),c+='<tr><td class="checkbox_array_title" name="checkbox-matrix"><div class="position-relative"><div class="edit-area edit-child-element" contenteditable="true">'+a[h]+"</div></div></td>";for(var p=n.find(".question-choice").find("tr:eq(0)").find("td").length,f=1;p>f;f++){c+='<td><input type="checkbox">';var u=n.find(".question-choice").find("tr:eq(0)").find("td:eq("+f+")").find(".choice");"Y"==u.attr("has_other")&&(c+='<input type="text" class="other-content"  style="width: 120px;height: 30px;vertical-align: middle;" >',1==u.attr("choice_required")&&(c+='<span class="required-content">(必填)</span>')),c+="</td>"}c+="</tr>"}{n.find(".question-choice").find("tr:eq(0)").clone()}n.find(".question-choice").find("tbody").append(c)}else{var v="";for(var h in a)$.trim(a[h])&&(c+='<td name="checkbox-matrix-clone"><div class="position-relative"><li class="choice edit-area matrix-choice" has_other="N" contenteditable="true"  >'+a[h]+"</li></div></td>",v+='<td><input type="checkbox"></td>');n.find(".question-choice").find("tr:eq(0)").append(c),n.find(".question-choice").find("tr").each(function(){$(this).index()>0&&$(this).append(v)})}elementInit(),n.find(".question-choice").hasClass("select-ul")||edit.saveSurvey(),t.remove(),e.resolve()}else t.find(".batch-add-error").html("输入内容不能为空！")}),t.find("#survey-confirm-n").click(function(){t.remove(),e.reject()}),t.find(".close").click(function(){t.remove(),e.reject()}),e.promise()}});